<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Paper 6</title>
</head>
<body>

   <h3>[Insert algorithm here]</h3>
   <button onclick="Launch()">Run</button>
   <p id="out"></p>

<script>

   var output = document.getElementById("out");

   // set up network enviroment

   var tick; //unit of time
   const VM_capacity = 6;
   const link_capacity = 5;
   const SF_types = [1,2,3,4,5];    //5 different types of service functions
   const num_SN = 4;
   var SFF1 = [0,0,0,0,0,0];
   var SFF2 = [0,0,0,0,0,0];
   var SFF3 = [0,0,0,0,0,0];
   var SFF4 = [0,0,0,0,0,0];
   var SN1 = [0,0,0,0,0,0];
   var SN2 = [0,0,0,0,0,0];
   var SN3 = [0,0,0,0,0,0];
   var SN4 = [0,0,0,0,0,0];
   var links = {
      ingress_to_SFF1: [],   //each link has capacity of 5 SFCs
      SSF1_to_SFF2: [],
      SSF1_to_SFF3: [],
      SSF2_to_SFF4: [],
      SSF3_to_SFF4: [],
      SFF1_to_SN1: [],
      SFF1_to_SN2: [],
      SFF2_to_SN1: [],
      SFF3_to_SN3: [],
      SFF4_to_SN4: [],
      SFF4_to_egress: [],
   }; 
   var dropped_packets = 0;
   var SFCs = [];
   
   function Launch()
   {
       //for 100 data items
       let data_items_remaining = 10;
       while(data_items_remaining > 0)
       {
          // generate the SFC 
          let sfc = GenerateSFC();
          SFCs.push(
            {
              id: data_items_remaining,
              SFC: sfc,
              dropped: false,
              sucess: false,
              lifespan: 0,
              destination: 'SFF1' 
            }
          );

          //send new SFC to link ingress_SFF1
            //is link ingress_SFF1 full


          //check every SFF to 

          // Decide where to send SFC

          // check for VM with SF available
          
         

          UpdateSFClifespan();
          data_items_remaining--;
       }
   }

   function FindVM(sf)
   {
       
    for(let i=0; i<num_SN;i++)
    {
        if(SN1[i] == sf) // SN1 would have sf
        {
            return 1;
        }
        else if(SN2[i] == sf) // SN1 would have sf
        {
            return 2;
        }
        else if(SN3[i] == sf) // SN1 would have sf
        {
            return 3;
        }
        else if(SN4[i] == sf) // SN1 would have sf
        {
            return 4;
        }
        else{
            return -1;
        }
    }
   }

   function NetworkState()
   {
       return {
           state: {
            SFF1,
            SFF2,
            SFF3,
            SFF4,
           }
       }
   }

   function GenerateSFC()
   {
       var SFC = [];
       while(SFC.length<3)
       {
         let number = Math.floor((Math.random() * 5) + 1);
         if(SFC.includes(number))
         {
            continue;
         }
         else{
             SFC.push(number);
         }
       }

      SFC.sort();

      return SFC;
   }

   function UpdateSFClifespan()
   {
    for(let i=0; i<SFCs.length;i++)
    {
        if(!SFCs[i].dropped && !SFCs[i].sucess)
        {
            SFCs[i].lifespan++;
        }
    }
   }

</script> 

</body>
</html>
